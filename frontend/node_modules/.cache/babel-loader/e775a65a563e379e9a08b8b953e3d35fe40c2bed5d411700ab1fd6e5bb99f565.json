{"ast":null,"code":"// ProductModal.js\nimport React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=\"https://grocery-store-management-system.onrender.com\";function ProductModal(_ref){let{onClose,onSave,product}=_ref;const[loading,setLoading]=useState(false);const isUpdateMode=!!product;const[formData,setFormData]=useState({name:product?product.name:'',uom_id:product?product.uom_id:'',price_per_unit:product?product.price_per_unit:'',product_id:product?product.product_id:''});const[uoms,setUoms]=useState([]);useEffect(()=>{fetch(`${API_BASE_URL}/getUOM`,{mode:'cors'}).then(response=>response.json()).then(data=>setUoms(data)).catch(error=>console.error('Error fetching UOMs:',error));},[]);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSave=()=>{setLoading(true);console.log(\"Loading...\");const requestPayload={product_name:formData.name,uom_id:formData.uom_id,price_per_unit:formData.price_per_unit,...(isUpdateMode&&{product_id:formData.product_id})};const endpoint=isUpdateMode?'updateProduct':'insertProduct';fetch(`${API_BASE_URL}/${endpoint}`,{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:`data=${JSON.stringify(requestPayload)}`}).then(()=>{onSave();}).catch(error=>console.error(`Error ${isUpdateMode?'updating':'saving'} product:`,error)).finally(()=>{setLoading(false);console.log(\"Loading finished.\");});};return/*#__PURE__*/_jsx(\"div\",{className:\"modal fade-scale show\",role:\"dialog\",\"data-backdrop\":\"static\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-header\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"modal-title\",children:isUpdateMode?'Update Product':'Add New Product'})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"productForm\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"id\",value:formData.product_id}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",placeholder:\"Product Name\",name:\"name\",type:\"text\",value:formData.name,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Unit\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"uom_id\",className:\"form-control\",value:formData.uom_id,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Unit\"}),uoms.map(uom=>/*#__PURE__*/_jsx(\"option\",{value:uom.uom_id,children:uom.uom_name},uom.uom_id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Price Per Unit\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",placeholder:\"Price Per Unit\",name:\"price_per_unit\",type:\"text\",value:formData.price_per_unit,onChange:handleChange})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:onClose,children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:handleSave,children:loading?isUpdateMode?'Updating..':'Saving..':isUpdateMode?'Update':'Save'})]})]})})});}export default ProductModal;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","ProductModal","_ref","onClose","onSave","product","loading","setLoading","isUpdateMode","formData","setFormData","name","uom_id","price_per_unit","product_id","uoms","setUoms","fetch","mode","then","response","json","data","catch","error","console","handleChange","e","target","value","handleSave","log","requestPayload","product_name","endpoint","method","headers","body","JSON","stringify","finally","className","role","children","id","type","placeholder","onChange","map","uom","uom_name","onClick"],"sources":["C:/Users/rohit/PycharmProjects/Grocery_Store_Management_System/frontend/src/components/ProductModal.js"],"sourcesContent":["// ProductModal.js\r\nimport React, { useState, useEffect } from 'react';\r\n\r\nconst API_BASE_URL = \"https://grocery-store-management-system.onrender.com\";\r\n\r\nfunction ProductModal({ onClose, onSave, product }) {\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const isUpdateMode = !!product;\r\n  const [formData, setFormData] = useState({\r\n    name: product ? product.name : '',\r\n    uom_id: product ? product.uom_id : '',\r\n    price_per_unit: product ? product.price_per_unit : '',\r\n    product_id: product ? product.product_id : ''\r\n  });\r\n  const [uoms, setUoms] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetch(`${API_BASE_URL}/getUOM`, { mode: 'cors' })\r\n      .then(response => response.json())\r\n      .then(data => setUoms(data))\r\n      .catch(error => console.error('Error fetching UOMs:', error));\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSave = () => {\r\n    setLoading(true);\r\n    console.log(\"Loading...\");\r\n    const requestPayload = {\r\n      product_name: formData.name,\r\n      uom_id: formData.uom_id,\r\n      price_per_unit: formData.price_per_unit,\r\n      ...(isUpdateMode && { product_id: formData.product_id })\r\n    };\r\n    const endpoint = isUpdateMode ? 'updateProduct' : 'insertProduct';\r\n    fetch(`${API_BASE_URL}/${endpoint}`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n      body: `data=${JSON.stringify(requestPayload)}`\r\n    })\r\n      .then(() => {\r\n        onSave();\r\n      })\r\n      .catch(error => console.error(`Error ${isUpdateMode ? 'updating' : 'saving'} product:`, error))\r\n      .finally(() => {\r\n        setLoading(false);\r\n        console.log(\"Loading finished.\");\r\n      }\r\n    );\r\n\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal fade-scale show\" role=\"dialog\" data-backdrop=\"static\">\r\n      <div className=\"modal-dialog\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h4 className=\"modal-title\">{isUpdateMode ? 'Update Product' : 'Add New Product'}</h4>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <form id=\"productForm\">\r\n              <input type=\"hidden\" name=\"id\" value={formData.product_id} />\r\n              <div className=\"form-group\">\r\n                <label>Name</label>\r\n                <input\r\n                  className=\"form-control\"\r\n                  placeholder=\"Product Name\"\r\n                  name=\"name\"\r\n                  type=\"text\"\r\n                  value={formData.name}\r\n                  onChange={handleChange}\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Unit</label>\r\n                <select\r\n                  name=\"uom_id\"\r\n                  className=\"form-control\"\r\n                  value={formData.uom_id}\r\n                  onChange={handleChange}\r\n                >\r\n                  <option value=\"\">Select Unit</option>\r\n                  {uoms.map(uom => (\r\n                    <option key={uom.uom_id} value={uom.uom_id}>\r\n                      {uom.uom_name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Price Per Unit</label>\r\n                <input\r\n                  className=\"form-control\"\r\n                  placeholder=\"Price Per Unit\"\r\n                  name=\"price_per_unit\"\r\n                  type=\"text\"\r\n                  value={formData.price_per_unit}\r\n                  onChange={handleChange}\r\n                />\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button type=\"button\" className=\"btn btn-secondary\" onClick={onClose}>\r\n              Close\r\n            </button>\r\n            <button type=\"button\" className=\"btn btn-primary\" onClick={handleSave}>\r\n              {loading ? (isUpdateMode ? 'Updating..' : 'Saving..') : (isUpdateMode ? 'Update' : 'Save')}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductModal;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnD,KAAM,CAAAC,YAAY,CAAG,sDAAsD,CAE3E,QAAS,CAAAC,YAAYA,CAAAC,IAAA,CAA+B,IAA9B,CAAEC,OAAO,CAAEC,MAAM,CAAEC,OAAQ,CAAC,CAAAH,IAAA,CAEhD,KAAM,CAACI,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAAc,YAAY,CAAG,CAAC,CAACH,OAAO,CAC9B,KAAM,CAACI,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,CACvCiB,IAAI,CAAEN,OAAO,CAAGA,OAAO,CAACM,IAAI,CAAG,EAAE,CACjCC,MAAM,CAAEP,OAAO,CAAGA,OAAO,CAACO,MAAM,CAAG,EAAE,CACrCC,cAAc,CAAER,OAAO,CAAGA,OAAO,CAACQ,cAAc,CAAG,EAAE,CACrDC,UAAU,CAAET,OAAO,CAAGA,OAAO,CAACS,UAAU,CAAG,EAC7C,CAAC,CAAC,CACF,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CAEpCC,SAAS,CAAC,IAAM,CACdsB,KAAK,CAAC,GAAGjB,YAAY,SAAS,CAAE,CAAEkB,IAAI,CAAE,MAAO,CAAC,CAAC,CAC9CC,IAAI,CAACC,QAAQ,EAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,EAAIN,OAAO,CAACM,IAAI,CAAC,CAAC,CAC3BC,KAAK,CAACC,KAAK,EAAIC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAAC,CACjE,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,YAAY,CAAIC,CAAC,EAAK,CAC1BjB,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAE,CAACkB,CAAC,CAACC,MAAM,CAACjB,IAAI,EAAGgB,CAAC,CAACC,MAAM,CAACC,KAAM,CAAC,CAAC,CAC/D,CAAC,CAED,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvBvB,UAAU,CAAC,IAAI,CAAC,CAChBkB,OAAO,CAACM,GAAG,CAAC,YAAY,CAAC,CACzB,KAAM,CAAAC,cAAc,CAAG,CACrBC,YAAY,CAAExB,QAAQ,CAACE,IAAI,CAC3BC,MAAM,CAAEH,QAAQ,CAACG,MAAM,CACvBC,cAAc,CAAEJ,QAAQ,CAACI,cAAc,CACvC,IAAIL,YAAY,EAAI,CAAEM,UAAU,CAAEL,QAAQ,CAACK,UAAW,CAAC,CACzD,CAAC,CACD,KAAM,CAAAoB,QAAQ,CAAG1B,YAAY,CAAG,eAAe,CAAG,eAAe,CACjES,KAAK,CAAC,GAAGjB,YAAY,IAAIkC,QAAQ,EAAE,CAAE,CACnCC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,mCAAoC,CAAC,CAChEC,IAAI,CAAE,QAAQC,IAAI,CAACC,SAAS,CAACP,cAAc,CAAC,EAC9C,CAAC,CAAC,CACCb,IAAI,CAAC,IAAM,CACVf,MAAM,CAAC,CAAC,CACV,CAAC,CAAC,CACDmB,KAAK,CAACC,KAAK,EAAIC,OAAO,CAACD,KAAK,CAAC,SAAShB,YAAY,CAAG,UAAU,CAAG,QAAQ,WAAW,CAAEgB,KAAK,CAAC,CAAC,CAC9FgB,OAAO,CAAC,IAAM,CACbjC,UAAU,CAAC,KAAK,CAAC,CACjBkB,OAAO,CAACM,GAAG,CAAC,mBAAmB,CAAC,CAClC,CACF,CAAC,CAEH,CAAC,CAED,mBACElC,IAAA,QAAK4C,SAAS,CAAC,uBAAuB,CAACC,IAAI,CAAC,QAAQ,CAAC,gBAAc,QAAQ,CAAAC,QAAA,cACzE9C,IAAA,QAAK4C,SAAS,CAAC,cAAc,CAAAE,QAAA,cAC3B5C,KAAA,QAAK0C,SAAS,CAAC,eAAe,CAAAE,QAAA,eAC5B9C,IAAA,QAAK4C,SAAS,CAAC,cAAc,CAAAE,QAAA,cAC3B9C,IAAA,OAAI4C,SAAS,CAAC,aAAa,CAAAE,QAAA,CAAEnC,YAAY,CAAG,gBAAgB,CAAG,iBAAiB,CAAK,CAAC,CACnF,CAAC,cACNX,IAAA,QAAK4C,SAAS,CAAC,YAAY,CAAAE,QAAA,cACzB5C,KAAA,SAAM6C,EAAE,CAAC,aAAa,CAAAD,QAAA,eACpB9C,IAAA,UAAOgD,IAAI,CAAC,QAAQ,CAAClC,IAAI,CAAC,IAAI,CAACkB,KAAK,CAAEpB,QAAQ,CAACK,UAAW,CAAE,CAAC,cAC7Df,KAAA,QAAK0C,SAAS,CAAC,YAAY,CAAAE,QAAA,eACzB9C,IAAA,UAAA8C,QAAA,CAAO,MAAI,CAAO,CAAC,cACnB9C,IAAA,UACE4C,SAAS,CAAC,cAAc,CACxBK,WAAW,CAAC,cAAc,CAC1BnC,IAAI,CAAC,MAAM,CACXkC,IAAI,CAAC,MAAM,CACXhB,KAAK,CAAEpB,QAAQ,CAACE,IAAK,CACrBoC,QAAQ,CAAErB,YAAa,CACxB,CAAC,EACC,CAAC,cACN3B,KAAA,QAAK0C,SAAS,CAAC,YAAY,CAAAE,QAAA,eACzB9C,IAAA,UAAA8C,QAAA,CAAO,MAAI,CAAO,CAAC,cACnB5C,KAAA,WACEY,IAAI,CAAC,QAAQ,CACb8B,SAAS,CAAC,cAAc,CACxBZ,KAAK,CAAEpB,QAAQ,CAACG,MAAO,CACvBmC,QAAQ,CAAErB,YAAa,CAAAiB,QAAA,eAEvB9C,IAAA,WAAQgC,KAAK,CAAC,EAAE,CAAAc,QAAA,CAAC,aAAW,CAAQ,CAAC,CACpC5B,IAAI,CAACiC,GAAG,CAACC,GAAG,eACXpD,IAAA,WAAyBgC,KAAK,CAAEoB,GAAG,CAACrC,MAAO,CAAA+B,QAAA,CACxCM,GAAG,CAACC,QAAQ,EADFD,GAAG,CAACrC,MAET,CACT,CAAC,EACI,CAAC,EACN,CAAC,cACNb,KAAA,QAAK0C,SAAS,CAAC,YAAY,CAAAE,QAAA,eACzB9C,IAAA,UAAA8C,QAAA,CAAO,gBAAc,CAAO,CAAC,cAC7B9C,IAAA,UACE4C,SAAS,CAAC,cAAc,CACxBK,WAAW,CAAC,gBAAgB,CAC5BnC,IAAI,CAAC,gBAAgB,CACrBkC,IAAI,CAAC,MAAM,CACXhB,KAAK,CAAEpB,QAAQ,CAACI,cAAe,CAC/BkC,QAAQ,CAAErB,YAAa,CACxB,CAAC,EACC,CAAC,EACF,CAAC,CACJ,CAAC,cACN3B,KAAA,QAAK0C,SAAS,CAAC,cAAc,CAAAE,QAAA,eAC3B9C,IAAA,WAAQgD,IAAI,CAAC,QAAQ,CAACJ,SAAS,CAAC,mBAAmB,CAACU,OAAO,CAAEhD,OAAQ,CAAAwC,QAAA,CAAC,OAEtE,CAAQ,CAAC,cACT9C,IAAA,WAAQgD,IAAI,CAAC,QAAQ,CAACJ,SAAS,CAAC,iBAAiB,CAACU,OAAO,CAAErB,UAAW,CAAAa,QAAA,CACnErC,OAAO,CAAIE,YAAY,CAAG,YAAY,CAAG,UAAU,CAAKA,YAAY,CAAG,QAAQ,CAAG,MAAO,CACpF,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CACH,CAAC,CAEV,CAEA,cAAe,CAAAP,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}