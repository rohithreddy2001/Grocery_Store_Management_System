{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductModal(_ref){let{onClose,onSave,product}=_ref;const isUpdateMode=!!product;const[formData,setFormData]=useState({name:product?product.name:'',uom_id:product?product.uom_id:'',price_per_unit:product?product.price_per_unit:'',product_id:product?product.product_id:''});const[uoms,setUoms]=useState([]);useEffect(()=>{fetch('http://127.0.0.1:5000/getUOM').then(response=>response.json()).then(data=>setUoms(data)).catch(error=>console.error('Error fetching UOMs:',error));},[]);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSave=()=>{const requestPayload={product_name:formData.name,uom_id:formData.uom_id,price_per_unit:formData.price_per_unit,...(isUpdateMode&&{product_id:formData.product_id})};const endpoint=isUpdateMode?'updateProduct':'insertProduct';fetch(`http://127.0.0.1:5000/${endpoint}`,{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:`data=${JSON.stringify(requestPayload)}`}).then(()=>{onSave();}).catch(error=>console.error(`Error ${isUpdateMode?'updating':'saving'} product:`,error));};return/*#__PURE__*/_jsx(\"div\",{className:\"modal fade-scale show\",role:\"dialog\",\"data-backdrop\":\"static\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-header\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"modal-title\",children:isUpdateMode?'Update Product':'Add New Product'})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"productForm\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"id\",value:formData.product_id}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",placeholder:\"Product Name\",name:\"name\",type:\"text\",value:formData.name,onChange:handleChange})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Unit\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"uom_id\",className:\"form-control\",value:formData.uom_id,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Unit\"}),uoms.map(uom=>/*#__PURE__*/_jsx(\"option\",{value:uom.uom_id,children:uom.uom_name},uom.uom_id))]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Price Per Unit\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",placeholder:\"Price Per Unit\",name:\"price_per_unit\",type:\"text\",value:formData.price_per_unit,onChange:handleChange})]})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:onClose,children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:handleSave,children:isUpdateMode?'Update':'Save'})]})]})})});}export default ProductModal;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","ProductModal","_ref","onClose","onSave","product","isUpdateMode","formData","setFormData","name","uom_id","price_per_unit","product_id","uoms","setUoms","fetch","then","response","json","data","catch","error","console","handleChange","e","target","value","handleSave","requestPayload","product_name","endpoint","method","headers","body","JSON","stringify","className","role","children","id","type","placeholder","onChange","map","uom","uom_name","onClick"],"sources":["C:/Users/rohit/PycharmProjects/Grocery_Store_Management_System/frontend/src/components/ProductModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nfunction ProductModal({ onClose, onSave, product }) {\r\n  const isUpdateMode = !!product;\r\n  const [formData, setFormData] = useState({\r\n    name: product ? product.name : '',\r\n    uom_id: product ? product.uom_id : '',\r\n    price_per_unit: product ? product.price_per_unit : '',\r\n    product_id: product ? product.product_id : ''\r\n  });\r\n  const [uoms, setUoms] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetch('http://127.0.0.1:5000/getUOM')\r\n      .then(response => response.json())\r\n      .then(data => setUoms(data))\r\n      .catch(error => console.error('Error fetching UOMs:', error));\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSave = () => {\r\n    const requestPayload = {\r\n      product_name: formData.name,\r\n      uom_id: formData.uom_id,\r\n      price_per_unit: formData.price_per_unit,\r\n      ...(isUpdateMode && { product_id: formData.product_id })\r\n    };\r\n    const endpoint = isUpdateMode ? 'updateProduct' : 'insertProduct';\r\n    fetch(`http://127.0.0.1:5000/${endpoint}`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n      body: `data=${JSON.stringify(requestPayload)}`\r\n    })\r\n      .then(() => {\r\n        onSave();\r\n      })\r\n      .catch(error => console.error(`Error ${isUpdateMode ? 'updating' : 'saving'} product:`, error));\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal fade-scale show\" role=\"dialog\" data-backdrop=\"static\">\r\n      <div className=\"modal-dialog\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h4 className=\"modal-title\">{isUpdateMode ? 'Update Product' : 'Add New Product'}</h4>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <form id=\"productForm\">\r\n              <input type=\"hidden\" name=\"id\" value={formData.product_id} />\r\n              <div className=\"row\">\r\n                <div className=\"col-sm-12\">\r\n                  <div className=\"form-group\">\r\n                    <label>Name</label>\r\n                    <input\r\n                      className=\"form-control\"\r\n                      placeholder=\"Product Name\"\r\n                      name=\"name\"\r\n                      type=\"text\"\r\n                      value={formData.name}\r\n                      onChange={handleChange}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-sm-12\">\r\n                  <div className=\"form-group\">\r\n                    <label>Unit</label>\r\n                    <select\r\n                      name=\"uom_id\"\r\n                      className=\"form-control\"\r\n                      value={formData.uom_id}\r\n                      onChange={handleChange}\r\n                    >\r\n                      <option value=\"\">Select Unit</option>\r\n                      {uoms.map(uom => (\r\n                        <option key={uom.uom_id} value={uom.uom_id}>\r\n                          {uom.uom_name}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-sm-12\">\r\n                  <div className=\"form-group\">\r\n                    <label>Price Per Unit</label>\r\n                    <input\r\n                      className=\"form-control\"\r\n                      placeholder=\"Price Per Unit\"\r\n                      name=\"price_per_unit\"\r\n                      type=\"text\"\r\n                      value={formData.price_per_unit}\r\n                      onChange={handleChange}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button type=\"button\" className=\"btn btn-secondary\" onClick={onClose}>\r\n              Close\r\n            </button>\r\n            <button type=\"button\" className=\"btn btn-primary\" onClick={handleSave}>\r\n              {isUpdateMode ? 'Update' : 'Save'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}